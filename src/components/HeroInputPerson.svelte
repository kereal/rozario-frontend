<script>
  export let svgSize = 24;
  export let currentState = "address";
  let dropdownvisible = false;
</script>

<style>
  .hero-input::placeholder {
    color: #6d6e71;
  }
  .dropdown {
    top: 3.5rem;
    z-index: 100;
  }
  .dropdownvisible {
    display: flex;
  }
</style>

<div class="flex w-full items-stretch h-full relative">
  <div class="flex items-center bg-white p-8 w-9/12 h-full rounded-l">
    <button class="h-full px-16 pl-8">
      {#if currentState !== 'person'}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={svgSize}
          height={svgSize}
          viewBox="0 0 32 32"
          xml:space="preserve">
          <g>
            <path
              fill="#666666"
              d="M19.576,19.066c1.988-1.267,3.316-3.565,3.316-6.2c0-3.998-3.066-7.243-6.852-7.243
              c-3.789,0-6.854,3.245-6.854,7.243c0,2.626,1.322,4.918,3.3,6.19c-3.87,0.959-8.008,3.219-8.008,5.536
              c0,0,1.112,1.783,11.638,1.783c10.668,0,11.402-1.783,11.402-1.783C27.521,22.217,23.375,20.037,19.576,19.066z" />
          </g>
        </svg>
      {:else}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={svgSize}
          height={svgSize}
          viewBox="0 0 32 32"
          xml:space="preserve">
          <g>
            <g>
              <path
                fill="#339933"
                d="M16.042,5.623c3.783,0,6.852,3.245,6.852,7.243c0,2.635-1.328,4.935-3.317,6.2
                c3.8,0.971,7.944,3.149,7.944,5.526c0,0-0.735,1.783-11.403,1.783c-10.524,0-11.638-1.783-11.638-1.783
                c0-2.318,4.138-4.578,8.008-5.536c-1.978-1.271-3.3-3.564-3.3-6.19C9.188,8.868,12.253,5.623,16.042,5.623
                M16.042,4.623
                c-4.332,0-7.854,3.698-7.854,8.243c0,2.194,0.811,4.238,2.23,5.758c-3.607,1.232-6.938,3.418-6.938,5.971v0.285l0.151,0.243
                c0.423,0.678,2.485,2.254,12.485,2.254c7.311,0,11.689-0.853,12.328-2.4l0.076-0.185v-0.197c0-2.797-3.756-4.854-6.881-5.945
                c1.436-1.52,2.254-3.572,2.254-5.782C23.894,8.321,20.371,4.623,16.042,4.623L16.042,4.623z" />
            </g>
          </g>
        </svg>
      {/if}
    </button>
    <input
      class="hero-input text-black text-lg"
      type="text"
      name="address"
      placeholder="Выберите повод или кому" />
  </div>
  <button
    on:click={() => (dropdownvisible = !dropdownvisible)}
    class="px-8 py-4 bg-gray-300 flex items-center h-full block">
    <svg
      class="mr-8"
      xmlns="http://www.w3.org/2000/svg"
      width={svgSize}
      height={svgSize}
      viewBox="0 0 32 32"
      xml:space="preserve">
      <g>
        <path
          fill="#666666"
          d="M25.164,14.831c-2.346-0.656-5.586-3.848-9.164-3.848c-3.579,0-6.819,3.191-9.165,3.848
          c-2.346,0.656-3.796,1.563-3.796,2.563c0,1,1.45,1.905,3.796,2.562c2.345,0.653,5.586,1.062,9.165,1.062
          c3.578,0,6.818-0.404,9.164-1.062c2.346-0.656,3.797-1.562,3.797-2.562C28.961,16.394,27.51,15.487,25.164,14.831z
          M9.552,18.432
          c-0.053,0-0.107-0.004-0.162-0.014c-0.3-0.051-0.599-0.1-0.895-0.154c-0.544-0.102-0.902-0.623-0.802-1.166
          c0.102-0.543,0.621-0.91,1.166-0.801c0.282,0.053,0.566,0.101,0.853,0.147c0.545,0.09,0.915,0.605,0.826,1.148
          C10.458,18.082,10.032,18.432,9.552,18.432z
          M16.521,19.023c-0.31,0.008-0.621,0.012-0.931,0.016c-0.003,0-0.007,0-0.01,0
          c-0.549,0-0.995-0.441-1-0.99c-0.006-0.555,0.438-1.006,0.989-1.01c0.3-0.004,0.6-0.008,0.897-0.016
          c0.537-0.034,1.012,0.42,1.024,0.975C17.508,18.549,17.072,19.008,16.521,19.023z
          M23.227,18.264
          c-0.299,0.055-0.596,0.104-0.896,0.154c-0.055,0.01-0.109,0.014-0.162,0.014c-0.48,0-0.906-0.35-0.984-0.84
          c-0.09-0.545,0.279-1.059,0.824-1.148c0.287-0.046,0.57-0.094,0.854-0.146c0.543-0.107,1.064,0.257,1.166,0.802
          C24.127,17.641,23.77,18.164,23.227,18.264z" />
      </g>
    </svg>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width={svgSize}
      height={svgSize}
      viewBox="0 0 32 32"
      xml:space="preserve">
      <polyline
        fill="none"
        stroke="#666666"
        stroke-width="2"
        stroke-miterlimit="10"
        points="26.883,10.56 15.999,21.44 5.117,10.56 " />
    </svg>
  </button>
  <div
    class:dropdownvisible
    class="rounded-b px-16 w-full h-full hidden items-center justify-start
    dropdown absolute bg-gray-300">
    <button class="flex items-center">
      <svg
        class="mr-8"
        xmlns="http://www.w3.org/2000/svg"
        width={svgSize}
        height={svgSize}
        viewBox="0 0 32 32"
        xml:space="preserve">
        <g>
          <path
            fill="#666666"
            d="M25.164,14.831c-2.346-0.656-5.586-3.848-9.164-3.848c-3.579,0-6.819,3.191-9.165,3.848
            c-2.346,0.656-3.796,1.563-3.796,2.563c0,1,1.45,1.905,3.796,2.562c2.345,0.653,5.586,1.062,9.165,1.062
            c3.578,0,6.818-0.404,9.164-1.062c2.346-0.656,3.797-1.562,3.797-2.562C28.961,16.394,27.51,15.487,25.164,14.831z
            M9.552,18.432
            c-0.053,0-0.107-0.004-0.162-0.014c-0.3-0.051-0.599-0.1-0.895-0.154c-0.544-0.102-0.902-0.623-0.802-1.166
            c0.102-0.543,0.621-0.91,1.166-0.801c0.282,0.053,0.566,0.101,0.853,0.147c0.545,0.09,0.915,0.605,0.826,1.148
            C10.458,18.082,10.032,18.432,9.552,18.432z
            M16.521,19.023c-0.31,0.008-0.621,0.012-0.931,0.016c-0.003,0-0.007,0-0.01,0
            c-0.549,0-0.995-0.441-1-0.99c-0.006-0.555,0.438-1.006,0.989-1.01c0.3-0.004,0.6-0.008,0.897-0.016
            c0.537-0.034,1.012,0.42,1.024,0.975C17.508,18.549,17.072,19.008,16.521,19.023z
            M23.227,18.264
            c-0.299,0.055-0.596,0.104-0.896,0.154c-0.055,0.01-0.109,0.014-0.162,0.014c-0.48,0-0.906-0.35-0.984-0.84
            c-0.09-0.545,0.279-1.059,0.824-1.148c0.287-0.046,0.57-0.094,0.854-0.146c0.543-0.107,1.064,0.257,1.166,0.802
            C24.127,17.641,23.77,18.164,23.227,18.264z" />
        </g>
      </svg>
      <p class="truncate text-gray-600">
        Мы узнаем адрес сами, но о цветах ни слова
      </p>
    </button>
  </div>
</div>
