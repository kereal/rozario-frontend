<script>
    import MiniButton from '../mobileComponents/MiniButton.svelte';
    import MainMenu from '../mobileComponents/MainMenu.svelte';
    import Button from '../mobileComponents/Button.svelte';
    import PickUpBouquet from '../mobileComponents/PickUpBouquet.svelte';
    import ModalCity from '../mobileComponents/ModalCity.svelte';
    export let user;
    let menuVisible = false;
    let cityVisible = false;
    let PickUpBouquetVisible = false;
    function openMenu() {
        menuVisible = !menuVisible
    }
    function openCity() {
        cityVisible = !cityVisible
    }
    function openPickUpBouquet() {
        PickUpBouquetVisible = !PickUpBouquetVisible;
    }
    let y;

</script>

<style>
.wrapper {
    height: 62px;
    border-bottom: 1px solid var(--gray-300);
    background-color: #fff;
    z-index:11;
    margin: 0 -16px;
    padding: 0 16px;
}
</style>

<svelte:window bind:scrollY={y}/>
<div class="wrapper flex justify-between items-center">
    <div on:click={openMenu}>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="4" viewBox="0 0 20 4" fill="none">
            <circle cx="2" cy="1.99976" r="2" fill="#330033"/>
            <circle cx="10" cy="1.99976" r="2" fill="#330033"/>
            <circle cx="18" cy="1.99976" r="2" fill="#330033"/>
        </svg>
    </div>
    <div>
        {#if y < 195 && !user}
            <svg xmlns="http://www.w3.org/2000/svg" width="195" height="26" viewBox="0 0 195 26" fill="none">
                <path d="M96.6755 14.162C96.6755 16.2051 96.1407 17.7989 95.0719 18.945C94.0032 20.0912 92.5145 20.6634 90.6078 20.6634C89.4157 20.6634 88.362 20.3994 87.4468 19.8725C86.5315 19.3446 85.8282 18.587 85.3357 17.5995C84.8432 16.6121 84.5975 15.4659 84.5975 14.162C84.5975 12.1345 85.1285 10.5518 86.1897 9.41301C87.2509 8.27423 88.7471 7.70483 90.6774 7.70483C92.523 7.70483 93.9844 8.28715 95.0606 9.4527C96.1378 10.6173 96.6755 12.1871 96.6755 14.162ZM87.3893 14.162C87.3893 17.0495 88.4778 18.4919 90.6539 18.4919C92.8074 18.4919 93.8846 17.0495 93.8846 14.162C93.8846 11.3048 92.7998 9.8772 90.6313 9.8772C89.4929 9.8772 88.6681 10.2454 88.1568 10.9837C87.6445 11.7229 87.3893 12.7832 87.3893 14.162Z" fill="#330033"/>
                <path d="M71.9652 7.93208V14.3421C71.9652 15.0887 71.904 16.185 71.7807 17.6321L78.1827 7.93115H81.4943V20.4357H78.887V14.1391C78.887 13.7921 78.9077 13.231 78.9501 12.4549C78.9925 11.6779 79.0283 11.1131 79.0593 10.7587L72.6799 20.4366H69.3683V7.93208H71.9652Z" fill="#330033"/>
                <path d="M61.121 20.6634C59.5061 20.6634 58.2519 20.0949 57.3602 18.9561H57.1992C57.3065 20.0119 57.3602 20.6514 57.3602 20.8775V26.0002H54.6493V7.93278H56.8414C56.9026 8.16533 57.0297 8.72365 57.2218 9.60496H57.3602C58.2058 8.33883 59.475 7.70483 61.1671 7.70483C62.7594 7.70483 63.9995 8.27054 64.8874 9.40102C65.7753 10.5324 66.2198 12.1188 66.2198 14.161C66.2198 16.2042 65.7678 17.798 64.8648 18.9441C63.9609 20.0903 62.7132 20.6634 61.121 20.6634ZM60.4637 9.8772C59.3865 9.8772 58.6003 10.1854 58.1041 10.8037C57.6078 11.422 57.3602 12.4095 57.3602 13.7661V14.162C57.3602 15.6846 57.6059 16.7874 58.0984 17.4694C58.5899 18.1514 59.3941 18.4919 60.5099 18.4919C61.4487 18.4919 62.1709 18.1154 62.6784 17.3614C63.1859 16.6075 63.4402 15.5333 63.4402 14.1389C63.4402 12.7371 63.1878 11.6758 62.685 10.9569C62.1803 10.2371 61.4402 9.8772 60.4637 9.8772Z" fill="#330033"/>
                <path d="M48.9261 20.4366L48.3837 18.6952H48.2915C47.6757 19.4565 47.057 19.9752 46.4337 20.2502C45.8103 20.5252 45.0109 20.6627 44.0345 20.6627C42.7802 20.6627 41.8019 20.3314 41.0985 19.6679C40.3951 19.0044 40.043 18.0667 40.043 16.8523C40.043 15.564 40.5317 14.5913 41.5081 13.9352C42.4846 13.28 43.9732 12.921 45.9723 12.8619L48.1756 12.7936V12.1264C48.1756 11.3282 47.9854 10.7292 47.605 10.3352C47.2246 9.93836 46.6342 9.73994 45.8339 9.73994C45.1804 9.73994 44.5533 9.83592 43.9535 10.0233C43.3537 10.2124 42.7765 10.4339 42.2237 10.6905L41.3471 8.79126C42.0392 8.43689 42.7962 8.16742 43.6201 7.98285C44.4431 7.79828 45.2199 7.70508 45.9506 7.70508C47.573 7.70508 48.7981 8.05299 49.6248 8.74512C50.4515 9.4391 50.8649 10.529 50.8649 12.0129V20.4366H48.9261ZM44.8885 18.6278C45.8725 18.6278 46.6625 18.3584 47.2595 17.8194C47.8555 17.2805 48.154 16.5247 48.154 15.552V14.4667L46.5156 14.5341C45.2388 14.5793 44.3103 14.7879 43.7294 15.1616C43.1484 15.5354 42.8584 16.1057 42.8584 16.8744C42.8584 17.4318 43.0269 17.8637 43.3659 18.1692C43.7039 18.4746 44.2115 18.6278 44.8885 18.6278Z" fill="#330033"/>
                <path d="M30.5529 12.929C31.7911 12.929 32.7026 12.7952 33.2864 12.5276C33.8702 12.26 34.1631 11.8475 34.1631 11.2901C34.1631 10.2713 33.2403 9.76369 31.3947 9.76369C30.164 9.76369 28.907 10.035 27.6226 10.5776L26.746 8.59907C28.23 8.00291 29.8684 7.70483 31.6603 7.70483C33.2441 7.70483 34.4747 7.98999 35.3514 8.55939C36.228 9.12878 36.6659 9.94365 36.6659 11.0068C36.6659 12.4095 35.8467 13.3286 34.2092 13.7651V13.8565C35.2318 14.1269 35.9644 14.5154 36.4069 15.0211C36.8485 15.5259 37.0698 16.1516 37.0698 16.8973C37.0698 18.0434 36.5566 18.957 35.5303 19.6399C34.5039 20.3228 33.0708 20.6625 31.2328 20.6625C29.2253 20.6625 27.6914 20.4022 26.6302 19.8817V17.5866C28.0379 18.2354 29.4946 18.5593 31.0021 18.5593C32.0868 18.5593 32.923 18.4107 33.5115 18.1136C34.1 17.8164 34.3938 17.3624 34.3938 16.7505C34.3938 16.1248 34.0981 15.6653 33.5058 15.3709C32.9135 15.0774 31.9983 14.9298 30.7601 14.9298H29.2027V12.9281H30.5529V12.929Z" fill="#330033"/>
                <path d="M24.6226 14.1615C24.6226 16.2046 24.0877 17.7984 23.019 18.9446C21.9503 20.0907 20.4616 20.6629 18.5548 20.6629C17.3628 20.6629 16.3091 20.399 15.3939 19.872C14.4786 19.3441 13.7752 18.5865 13.2828 17.5991C12.7903 16.6116 12.5446 15.4654 12.5446 14.1615C12.5446 12.134 13.0756 10.5513 14.1368 9.41253C15.198 8.27374 16.6942 7.70435 18.6245 7.70435C20.4701 7.70435 21.9315 8.28666 23.0077 9.45221C24.084 10.6168 24.6226 12.1866 24.6226 14.1615ZM15.3355 14.1615C15.3355 17.049 16.424 18.4914 18.6 18.4914C20.7535 18.4914 21.8307 17.049 21.8307 14.1615C21.8307 11.3044 20.746 9.87671 18.5774 9.87671C17.439 9.87671 16.6142 10.2449 16.1029 10.9832C15.5916 11.7224 15.3355 12.7827 15.3355 14.1615Z" fill="#330033"/>
                <path d="M11.1665 8.90368C11.1665 10.6303 10.5903 11.9537 9.43681 12.8728C8.2824 13.792 6.64117 14.2515 4.51031 14.2515H2.75703V20.4364H0V3.90649H4.85682C6.96414 3.90649 8.54322 4.32916 9.59218 5.17263C10.6421 6.01703 11.1665 7.26102 11.1665 8.90368ZM2.75703 11.9795H4.22218C5.63742 11.9795 6.67507 11.7377 7.33702 11.256C7.99803 10.7734 8.32948 10.0194 8.32948 8.99412C8.32948 8.04544 8.03381 7.3367 7.44154 6.86882C6.84927 6.40186 5.92649 6.16746 4.67321 6.16746H2.75703V11.9795Z" fill="#330033"/>
                <path d="M182.783 13.1664H186.232C187.839 13.1664 189.029 13.4581 189.802 14.0422C190.574 14.6273 190.961 15.4994 190.961 16.6603C190.961 17.9043 190.551 18.8438 189.732 19.4815C188.913 20.1182 187.708 20.4366 186.115 20.4366H180.866V8.04468H182.782V13.1664H182.783ZM182.783 14.7833V18.865H186.024C188.054 18.865 189.069 18.1682 189.069 16.7729C189.069 16.0799 188.834 15.5741 188.365 15.2576C187.896 14.9411 187.096 14.7823 185.965 14.7823H182.783V14.7833ZM195 20.4366H193.085V8.04468H195V20.4366Z" fill="#330033"/>
                <path d="M178.363 9.6495H174.257V20.4357H172.342V9.6495H168.281V8.04468H178.364V9.6495H178.363Z" fill="#330033"/>
                <path d="M161.924 20.663C160.055 20.663 158.579 20.1056 157.499 18.9899C156.419 17.8742 155.879 16.3257 155.879 14.3434C155.879 12.3454 156.381 10.7591 157.384 9.58337C158.388 8.40767 159.736 7.81982 161.428 7.81982C163.012 7.81982 164.267 8.33016 165.188 9.35174C166.111 10.3733 166.574 11.7198 166.574 13.3938V14.5806H157.864C157.901 16.0359 158.276 17.1396 158.988 17.8936C159.699 18.6475 160.701 19.025 161.993 19.025C163.353 19.025 164.7 18.7453 166.03 18.1879V19.8611C165.353 20.1481 164.714 20.3529 164.109 20.4775C163.505 20.6021 162.777 20.663 161.924 20.663ZM161.404 9.3905C160.389 9.3905 159.579 9.71534 158.976 10.3623C158.372 11.011 158.016 11.9089 157.909 13.0533H164.52C164.52 11.8711 164.251 10.9639 163.712 10.3355C163.173 9.70519 162.403 9.3905 161.404 9.3905Z" fill="#330033"/>
                <path d="M153.398 11.1537C153.398 11.9603 153.162 12.5731 152.689 12.9911C152.215 13.4092 151.553 13.6906 150.699 13.8327V13.9343C151.776 14.0773 152.563 14.3864 153.058 14.8617C153.554 15.337 153.802 15.9931 153.802 16.8292C153.802 17.9828 153.37 18.8724 152.505 19.4981C151.639 20.1237 150.376 20.4366 148.716 20.4366H143.143V8.04468H148.693C151.829 8.04468 153.398 9.08103 153.398 11.1537ZM151.53 11.3355C151.53 10.732 151.294 10.3047 150.82 10.0519C150.347 9.79992 149.63 9.67349 148.668 9.67349H145.058V13.1664H148.299C149.484 13.1664 150.319 13.0243 150.802 12.7373C151.287 12.4512 151.53 11.9834 151.53 11.3355ZM151.887 16.7055C151.887 16.0346 151.627 15.5465 151.108 15.241C150.588 14.9355 149.73 14.7833 148.53 14.7833H145.057V18.865H148.575C150.783 18.865 151.887 18.1452 151.887 16.7055Z" fill="#330033"/>
                <path d="M138.608 18.695H140.592V24.7443H138.734V20.4364H126.021V3.90649H127.982V18.695H136.646V3.90649H138.607V18.695H138.608Z" fill="#330033"/>
                <path d="M118.487 3.12105L118.045 1.78939L116.769 2.40585C115.939 2.80636 115.152 3.2078 114.403 3.612C113.759 2.78329 113.053 1.93243 112.28 1.05758L111.347 0L110.414 1.05758C109.642 1.93151 108.934 2.78237 108.289 3.61016C107.543 3.20595 106.756 2.80544 105.924 2.40492L104.647 1.78754L104.208 3.1192C102.006 9.78489 101.677 14.7636 102.454 18.3396C102.631 20.0764 103.373 21.6019 104.464 22.8237L104.471 22.8311C106.281 25.1216 108.829 26.0721 111.35 25.9946C113.868 26.0721 116.416 25.1225 118.225 22.8311L118.233 22.8237C119.323 21.6019 120.066 20.0755 120.244 18.3396C121.019 14.7645 120.689 9.78581 118.487 3.12105ZM111.347 2.99647C111.802 3.5391 112.235 4.07065 112.652 4.59483C112.204 4.86891 111.771 5.14115 111.349 5.41616C110.925 5.14115 110.489 4.86891 110.043 4.59483C110.458 4.06973 110.893 3.5391 111.347 2.99647ZM106.13 5.21774C107.243 5.78714 108.26 6.35653 109.191 6.925C107.272 8.38309 105.821 9.8338 104.764 11.2513C105.011 9.46558 105.452 7.45933 106.13 5.21774ZM116.269 21.3545C114.391 23.7318 111.345 24.0456 108.873 23.0203C106.403 21.9959 104.516 19.6334 104.951 16.6564C105.434 13.3554 108.62 9.29024 116.565 5.21774C119.11 13.6451 118.352 18.718 116.269 21.3545Z" fill="#330033"/>
            </svg>
        {:else}
            <Button size="sm">
                <div class="flex">
                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M11.841 16.635C10.737 16.635 10.113 15.727 9.98102 13.93C9.17302 14.627 8.46602 14.979 7.87002 14.979C7.43802 14.979 7.04102 14.819 6.75002 14.524C6.45702 14.231 6.29602 13.836 6.29602 13.415C6.29602 12.815 6.65102 12.105 7.35302 11.299C5.55502 11.168 4.64502 10.544 4.64502 9.441C4.64502 8.338 5.55502 7.716 7.35302 7.585C6.65202 6.78 6.29602 6.069 6.29602 5.47C6.29602 5.051 6.45702 4.657 6.74702 4.358C7.04702 4.061 7.44302 3.902 7.86902 3.902C8.46102 3.902 9.16902 4.255 9.98002 4.953C10.112 3.158 10.736 2.25 11.84 2.25C12.944 2.25 13.569 3.158 13.699 4.954C14.506 4.253 15.215 3.9 15.812 3.9C16.236 3.9 16.631 4.061 16.927 4.353C17.222 4.649 17.383 5.044 17.383 5.469C17.383 6.065 17.029 6.775 16.327 7.584C18.123 7.715 19.032 8.338 19.032 9.44C19.032 10.544 18.125 11.167 16.327 11.298C17.028 12.107 17.383 12.817 17.383 13.414C17.383 13.84 17.22 14.238 16.922 14.531C16.636 14.818 16.24 14.978 15.812 14.978C15.113 14.978 14.342 14.482 13.7 13.927C13.569 15.725 12.945 16.635 11.841 16.635ZM10.663 11.609C10.747 11.609 10.833 11.626 10.914 11.657C11.185 11.767 11.353 12.041 11.329 12.333C11.303 12.645 11.29 12.9 11.29 13.162C11.29 14.639 11.567 15.299 11.841 15.299C12.114 15.299 12.39 14.639 12.39 13.162C12.39 12.892 12.377 12.621 12.353 12.337C12.328 12.045 12.494 11.771 12.764 11.659C13.034 11.549 13.346 11.625 13.532 11.851C13.728 12.087 13.898 12.275 14.086 12.459C14.893 13.275 15.547 13.644 15.814 13.644C15.886 13.644 15.942 13.623 15.982 13.583C16.04 13.526 16.05 13.46 16.05 13.413C16.05 13.141 15.683 12.501 14.862 11.684C14.672 11.493 14.455 11.294 14.254 11.126C14.03 10.938 13.955 10.625 14.068 10.355C14.182 10.085 14.458 9.924 14.752 9.951C14.996 9.975 15.261 9.987 15.564 9.987C17.031 9.987 17.699 9.702 17.699 9.438C17.699 9.166 17.039 8.891 15.564 8.891C15.267 8.891 15.001 8.903 14.752 8.929C14.459 8.957 14.183 8.795 14.068 8.525C13.955 8.254 14.03 7.942 14.254 7.754C14.503 7.544 14.725 7.334 14.864 7.194C15.682 6.377 16.05 5.737 16.05 5.466C16.05 5.399 16.028 5.338 15.987 5.298C15.945 5.256 15.886 5.234 15.814 5.234C15.543 5.234 14.904 5.6 14.088 6.416C13.894 6.611 13.716 6.804 13.53 7.026C13.343 7.251 13.03 7.327 12.762 7.214C12.491 7.102 12.325 6.827 12.353 6.536C12.377 6.257 12.39 5.989 12.39 5.716C12.39 4.241 12.115 3.581 11.841 3.581C11.567 3.581 11.29 4.241 11.29 5.716C11.29 6.051 11.311 6.336 11.329 6.547C11.354 6.839 11.185 7.112 10.914 7.222C10.644 7.331 10.331 7.252 10.146 7.025C9.97402 6.813 9.79302 6.612 9.59502 6.411C8.77902 5.599 8.13902 5.233 7.87002 5.233C7.79902 5.233 7.73602 5.255 7.69602 5.294C7.65802 5.333 7.63302 5.398 7.63302 5.466C7.63302 5.739 8.00002 6.38 8.82102 7.193C8.93402 7.308 9.15402 7.524 9.42802 7.751C9.65402 7.938 9.73102 8.251 9.61702 8.523C9.50402 8.794 9.22102 8.959 8.93402 8.929C8.68102 8.904 8.41402 8.891 8.11902 8.891C6.64202 8.891 5.98102 9.166 5.98102 9.438C5.98102 9.702 6.65102 9.987 8.11902 9.987C8.42002 9.987 8.68702 9.975 8.93402 9.951C9.22202 9.923 9.50402 10.086 9.61702 10.357C9.73102 10.629 9.65402 10.942 9.42802 11.129C9.21602 11.305 8.99802 11.504 8.83002 11.677C8.00002 12.5 7.63302 13.14 7.63302 13.414C7.63302 13.48 7.65702 13.541 7.70002 13.586C7.73702 13.623 7.79802 13.645 7.87002 13.645C8.14202 13.645 8.78302 13.278 9.59802 12.462C9.79102 12.268 9.97102 12.069 10.146 11.854C10.275 11.696 10.467 11.609 10.663 11.609Z"
                                  fill="white"/>
                            <path d="M14.58 21.752C13.047 21.752 11.756 21.229 11.701 21.209C11.394 21.082 11.226 20.75 11.307 20.428C11.339 20.303 12.1 17.34 14.406 16.172C15.097 15.822 15.9 15.647 16.797 15.647C18.329 15.647 19.622 16.167 19.675 16.19C19.982 16.315 20.151 16.647 20.07 16.969C20.04 17.094 19.278 20.059 16.97 21.227C16.28 21.574 15.476 21.752 14.58 21.752ZM12.8 20.162C13.241 20.283 13.886 20.418 14.58 20.418C15.264 20.418 15.865 20.287 16.368 20.033C17.597 19.412 18.276 18.029 18.579 17.234C18.139 17.113 17.492 16.98 16.797 16.98C16.112 16.98 15.512 17.109 15.012 17.363C13.788 17.982 13.105 19.369 12.8 20.162Z"
                                  fill="white"/>
                            <path d="M9.42001 21.752C8.52401 21.752 7.71901 21.574 7.02901 21.227C4.72201 20.059 3.96101 17.094 3.92901 16.969C3.84901 16.647 4.01701 16.315 4.32501 16.19C4.37901 16.167 5.67101 15.647 7.20301 15.647C8.09901 15.647 8.90201 15.823 9.59301 16.172C11.9 17.34 12.661 20.303 12.692 20.428C12.773 20.75 12.605 21.082 12.298 21.209C12.244 21.229 10.953 21.752 9.42001 21.752ZM5.42201 17.234C5.72701 18.027 6.41001 19.416 7.63201 20.033C8.13401 20.287 8.73601 20.418 9.42001 20.418C10.113 20.418 10.758 20.283 11.2 20.162C10.895 19.369 10.212 17.982 8.98901 17.363C8.48901 17.109 7.88801 16.98 7.20301 16.98C6.50501 16.98 5.86201 17.113 5.42201 17.234Z"
                                  fill="white"/>
                        </svg>
                    </div>
                    <div class="ml-10" on:click={openPickUpBouquet}>
                        Подобрать букет
                    </div>
                </div>
            </Button>
        {/if}

    </div>
    <div on:click={openCity}>
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M1 10.4579L20.8429 1L11.4986 20.9543L10.3443 11.7264L1 10.4579Z" stroke="#330033" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>
</div>

{#if menuVisible}
    <MainMenu bind:user={user} bind:visible={menuVisible}/>
{/if}
{#if PickUpBouquetVisible}
    <PickUpBouquet bind:visible={PickUpBouquetVisible}/>
{/if}
{#if cityVisible}
    <ModalCity bind:visible={cityVisible}/>
{/if}